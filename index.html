<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Design your dream engagement ring">
    <title>For Maria üíç</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p class="loading-text">Creating your dream ring...</p>
    </div>

    <!-- Screen 1: Landing Page -->
    <section id="landingScreen" class="screen active">
        <div class="container">
            <div class="landing-content">
                <h1 class="landing-title fade-in">Maria</h1>
                <p class="landing-subtitle fade-in-delay">Design Your Forever Ring</p>
                <p class="landing-description fade-in-delay-2">
                    This moment is yours to create something as unique and beautiful as our love.
                    Choose a design that speaks to your heart, or dream up something entirely your own.
                </p>
                <button class="btn btn-primary fade-in-delay-3" onclick="app.showScreen('designerScreen')">
                    Begin Your Journey
                </button>
            </div>
        </div>
        <div class="landing-particles"></div>
    </section>

    <!-- Screen 2: AI Designer with Live Preview -->
    <section id="designerScreen" class="screen">
        <div class="container">
            <button class="btn-back" onclick="app.showScreen('landingScreen')">‚Üê Back</button>
            <h2 class="screen-title">Design Your Dream Ring</h2>
            <p class="screen-subtitle">Tap terms to see examples and build your perfect description</p>

            <!-- Designer Layout: Preview + Form -->
            <div class="designer-layout">
                <!-- Live Preview Panel -->
                <div class="live-preview-panel">
                    <div class="preview-ring-image" id="livePreviewContainer">
                        <img id="livePreviewImage" src="" alt="Ring preview">
                        <div class="preview-placeholder" id="previewPlaceholder">
                            <span class="placeholder-icon">üíç</span>
                            <p>Your ring preview will appear here</p>
                        </div>
                    </div>
                    <div class="preview-caption" id="previewCaption"></div>
                </div>

                <!-- Form Panel -->
                <div class="designer-form-panel">
                    <!-- Tab Navigation -->
                    <div class="designer-tabs">
                        <button class="tab-btn active" onclick="app.switchTab('import')" id="tabImport">
                            <span class="tab-icon">üîó</span>
                            <span class="tab-label">Import Ring</span>
                        </button>
                        <button class="tab-btn" onclick="app.switchTab('design')" id="tabDesign">
                            <span class="tab-icon">‚ú®</span>
                            <span class="tab-label">Design Your Own</span>
                        </button>
                    </div>

                    <!-- Tab Content: Import -->
                    <div class="tab-content active" id="tabContentImport">
                    <!-- URL Import Section -->
                    <div class="url-import-section" id="urlImportSection">
                        <div class="import-header">
                            <h3 class="import-title">Import a Ring You Love</h3>
                            <p class="import-subtitle">Found a ring online? Paste the image URL directly!</p>
                        </div>

                        <div class="import-instructions">
                            <div class="instruction-step">
                                <span class="step-number">1</span>
                                <span>Find a ring image on any website</span>
                            </div>
                            <div class="instruction-step">
                                <span class="step-number">2</span>
                                <span>Right-click the image ‚Üí "Copy image address"</span>
                            </div>
                            <div class="instruction-step">
                                <span class="step-number">3</span>
                                <span>Paste the URL below</span>
                            </div>
                        </div>

                        <div class="url-input-container">
                            <div class="url-input-wrapper">
                                <span class="url-icon">üñºÔ∏è</span>
                                <input
                                    type="url"
                                    id="ringUrlInput"
                                    placeholder="Paste image URL (ends in .jpg, .png, .webp...)"
                                    autocomplete="off"
                                >
                                <button class="btn-import" onclick="app.importImageUrl()" id="importBtn">
                                    Import
                                </button>
                            </div>
                            <div class="url-status" id="urlStatus"></div>
                        </div>

                        <!-- Quick Links to Luxury Vendors -->
                        <div class="vendor-quick-links">
                            <p class="vendor-links-label">Browse luxury jewelers:</p>
                            <div class="vendor-links-row">
                                <a href="https://www.tiffany.com/engagement/engagement-rings/" target="_blank" rel="noopener" class="vendor-link">üíé Tiffany & Co.</a>
                                <a href="https://www.cartier.com/en-us/jewelry/engagement-rings/" target="_blank" rel="noopener" class="vendor-link">üëë Cartier</a>
                                <a href="https://www.harrywinston.com/en/jewelry/bridal" target="_blank" rel="noopener" class="vendor-link">‚ú® Harry Winston</a>
                                <a href="https://www.vancleefarpels.com/us/en/collections/bridal.html" target="_blank" rel="noopener" class="vendor-link">üå∏ Van Cleef</a>
                                <a href="https://www.graff.com/us-en/bridal/" target="_blank" rel="noopener" class="vendor-link">üí´ Graff</a>
                            </div>
                        </div>

                        <div class="import-divider">
                            <span>or design your own below</span>
                        </div>
                    </div>

                    <!-- Imported Ring Preview (hidden initially) -->
                    <div class="imported-ring-preview" id="importedRingPreview" style="display: none;">
                        <div class="imported-ring-header">
                            <span class="imported-label">Your Imported Ring</span>
                            <button class="btn-close-import" onclick="app.clearImport()">√ó</button>
                        </div>
                        <div class="imported-ring-image-container">
                            <img id="importedRingImage" src="" alt="Imported ring" />
                        </div>
                        <div class="imported-ring-actions">
                            <button class="btn btn-primary" onclick="app.selectImportedRing()">
                                This Is The One! üíï
                            </button>
                            <button class="btn btn-secondary" onclick="app.useAsInspiration()">
                                Use as Inspiration
                            </button>
                        </div>
                    </div>
                    </div><!-- End Tab Content: Import -->

                    <!-- Tab Content: Design -->
                    <div class="tab-content" id="tabContentDesign">
                    <!-- Conversation Container -->
                    <div class="design-conversation" id="designConversation">
                        <!-- Initial prompt area (shown when no designs yet) -->
                        <div class="initial-prompt" id="initialPrompt">
                            <div class="designer-form">
                                <label for="ringDescription">Describe your dream engagement ring:</label>
                                <textarea
                                    id="ringDescription"
                                    placeholder="Tap the terms below to build your description, or type freely..."
                                    maxlength="500"
                                    rows="3"
                                ></textarea>
                                <div class="char-counter">
                                    <span id="charCount">0</span> / 500 characters
                                </div>

                                <!-- Interactive Ring Terminology Guide -->
                                <div class="inline-ring-guide" id="ringGuide">
                                    <p class="guide-intro">üíé Tap to see examples & add to description:</p>

                                    <div class="guide-row">
                                        <span class="guide-label">Diamond:</span>
                                        <div class="guide-chips" id="guideShapes"></div>
                                    </div>

                                    <div class="guide-row">
                                        <span class="guide-label">Setting:</span>
                                        <div class="guide-chips" id="guideSettings"></div>
                                    </div>

                                    <div class="guide-row">
                                        <span class="guide-label">Metal:</span>
                                        <div class="guide-chips" id="guideMetals"></div>
                                    </div>

                                    <div class="guide-row">
                                        <span class="guide-label">Accents:</span>
                                        <div class="guide-chips" id="guideAccents"></div>
                                    </div>
                                </div>

                                <button class="btn btn-primary" onclick="app.generateRing()" id="generateBtn">
                                    Create My Ring ‚ú®
                                </button>
                            </div>
                        </div>

                        <!-- Conversation History (shown after first generation) -->
                        <div class="conversation-history" id="conversationHistory" style="display: none;">
                            <!-- Messages will be inserted here -->
                        </div>

                        <!-- Refinement Input (shown after first generation) -->
                        <div class="refinement-input" id="refinementInput" style="display: none;">
                            <div class="refinement-form">
                                <input
                                    type="text"
                                    id="refinementText"
                                    placeholder="Refine your design: 'make the band thinner' or 'add sapphire side stones'..."
                                    maxlength="200"
                                >
                                <button class="btn btn-primary btn-refine" onclick="app.refineDesign()">
                                    Refine ‚ú®
                                </button>
                            </div>
                            <div class="refinement-actions">
                                <button class="btn btn-secondary" onclick="app.selectCurrentDesign()">
                                    I Love This! üíï
                                </button>
                                <button class="btn-reset" onclick="app.startOver()">
                                    Start Over
                                </button>
                            </div>
                        </div>
                    </div>
                    </div><!-- End Tab Content: Design -->
                </div>
            </div>
        </div>
    </section>

    <!-- Screen 5: Preview & Confirmation -->
    <section id="previewScreen" class="screen">
        <div class="container">
            <h2 class="screen-title">Your Perfect Ring</h2>
            <p class="screen-subtitle">Take a moment to imagine this on your hand...</p>

            <div class="preview-content">
                <div class="preview-image-container">
                    <img id="previewImage" src="" alt="Your ring design">
                </div>

                <div class="preview-details">
                    <h3>Design Details</h3>
                    <p id="previewDescription"></p>

                    <div class="preview-actions">
                        <button class="btn btn-primary" onclick="app.confirmDesign()">
                            This is Perfect! üíï
                        </button>
                        <button class="btn btn-secondary" onclick="app.goBack()">
                            Let me revise
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Screen 6: Thank You / Confirmation -->
    <section id="thankYouScreen" class="screen">
        <div class="container">
            <div class="thankyou-content">
                <div class="thankyou-icon">üíç</div>
                <h2 class="thankyou-title">Your Design Has Been Saved!</h2>
                <p class="thankyou-message">
                    Maria, your beautiful choice has been captured.
                    This ring will be crafted with all the love and care you deserve.
                    I can't wait to see it on your hand and hear you say yes.
                </p>
                <div class="thankyou-ring-preview">
                    <img id="finalRingImage" src="" alt="Your chosen ring">
                </div>
                <p class="thankyou-note">
                    All the love in the world,<br>
                    <span class="signature">Forever Yours</span>
                </p>
            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="js/fal-api.js"></script>
    <script src="js/firebase-client.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
