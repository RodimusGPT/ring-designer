<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Design your dream engagement ring">
    <title>For Maria üíç</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p class="loading-text">Creating your dream ring...</p>
    </div>

    <!-- Screen 1: Landing Page -->
    <section id="landingScreen" class="screen active">
        <div class="container">
            <div class="landing-content">
                <h1 class="landing-title fade-in">Maria</h1>
                <p class="landing-subtitle fade-in-delay">Design Your Forever Ring</p>
                <p class="landing-description fade-in-delay-2">
                    This moment is yours to create something as unique and beautiful as our love.
                    Choose a design that speaks to your heart, or dream up something entirely your own.
                </p>
                <button class="btn btn-primary fade-in-delay-3" onclick="app.showScreen('designerScreen')">
                    Begin Your Journey
                </button>
            </div>
        </div>
        <div class="landing-particles"></div>
    </section>

    <!-- Screen 2: AI Designer with Live Preview -->
    <section id="designerScreen" class="screen">
        <div class="container">
            <button class="btn-back" onclick="app.showScreen('landingScreen')">‚Üê Back</button>
            <h2 class="screen-title">Design Your Dream Ring</h2>
            <p class="screen-subtitle">Tap terms to see examples and build your perfect description</p>

            <!-- Designer Layout: Preview + Form -->
            <div class="designer-layout">
                <!-- Live Preview Panel -->
                <div class="live-preview-panel">
                    <div class="preview-ring-image" id="livePreviewContainer">
                        <img id="livePreviewImage" src="" alt="Ring preview">
                        <div class="preview-placeholder" id="previewPlaceholder">
                            <span class="placeholder-icon">üíé</span>
                            <p>Tap ring terms below to see examples</p>
                        </div>
                    </div>
                    <div class="preview-caption" id="previewCaption"></div>
                </div>

                <!-- Form Panel -->
                <div class="designer-form-panel">
                    <!-- URL Import Section -->
                    <div class="url-import-section" id="urlImportSection">
                        <div class="import-header">
                            <h3 class="import-title">Import from Your Favorite Jeweler</h3>
                            <p class="import-subtitle">Found a ring you love? Paste the URL and we'll import it!</p>
                        </div>

                        <div class="vendor-showcase">
                            <div class="vendor-logos" id="vendorLogos">
                                <!-- Populated by JavaScript -->
                            </div>
                            <button class="btn-show-all-vendors" onclick="app.toggleVendorList()">
                                See all supported stores
                            </button>
                        </div>

                        <div class="url-input-container">
                            <div class="url-input-wrapper">
                                <span class="url-icon">üîó</span>
                                <input
                                    type="url"
                                    id="ringUrlInput"
                                    placeholder="Paste ring URL from Tiffany, Blue Nile, James Allen..."
                                    autocomplete="off"
                                >
                                <button class="btn-import" onclick="app.importFromUrl()" id="importBtn">
                                    Import
                                </button>
                            </div>
                            <div class="url-status" id="urlStatus"></div>
                        </div>

                        <!-- Expanded Vendor List (hidden by default) -->
                        <div class="vendor-list-expanded" id="vendorListExpanded" style="display: none;">
                            <div class="vendor-category" id="vendorLuxury">
                                <h4>Luxury Brands</h4>
                                <div class="vendor-grid"></div>
                            </div>
                            <div class="vendor-category" id="vendorSpecialist">
                                <h4>Diamond Specialists</h4>
                                <div class="vendor-grid"></div>
                            </div>
                            <div class="vendor-category" id="vendorRetail">
                                <h4>Major Retailers</h4>
                                <div class="vendor-grid"></div>
                            </div>
                            <div class="vendor-category" id="vendorDesigner">
                                <h4>Designer Collections</h4>
                                <div class="vendor-grid"></div>
                            </div>
                        </div>

                        <div class="import-divider">
                            <span>or design your own</span>
                        </div>
                    </div>

                    <!-- Imported Ring Preview (hidden initially) -->
                    <div class="imported-ring-preview" id="importedRingPreview" style="display: none;">
                        <div class="imported-ring-header">
                            <span class="imported-vendor-badge" id="importedVendorBadge"></span>
                            <button class="btn-close-import" onclick="app.clearImport()">√ó</button>
                        </div>
                        <div class="imported-ring-images" id="importedRingImages">
                            <!-- Images populated by JavaScript -->
                        </div>
                        <div class="imported-ring-details">
                            <h3 id="importedRingTitle">Ring Name</h3>
                            <p class="imported-ring-price" id="importedRingPrice"></p>
                            <div class="imported-ring-meta" id="importedRingMeta">
                                <!-- Metadata populated by JavaScript -->
                            </div>
                        </div>
                        <div class="imported-ring-actions">
                            <button class="btn btn-primary" onclick="app.selectImportedRing()">
                                I Love This Ring! üíï
                            </button>
                            <button class="btn btn-secondary" onclick="app.useAsInspiration()">
                                Use as Inspiration
                            </button>
                        </div>
                    </div>

                    <!-- Conversation Container -->
                    <div class="design-conversation" id="designConversation">
                        <!-- Initial prompt area (shown when no designs yet) -->
                        <div class="initial-prompt" id="initialPrompt">
                            <div class="designer-form">
                                <label for="ringDescription">Describe your dream engagement ring:</label>
                                <textarea
                                    id="ringDescription"
                                    placeholder="Tap the terms below to build your description, or type freely..."
                                    maxlength="500"
                                    rows="3"
                                ></textarea>
                                <div class="char-counter">
                                    <span id="charCount">0</span> / 500 characters
                                </div>

                                <!-- Interactive Ring Terminology Guide -->
                                <div class="inline-ring-guide" id="ringGuide">
                                    <p class="guide-intro">üíé Tap to see examples & add to description:</p>

                                    <div class="guide-row">
                                        <span class="guide-label">Diamond:</span>
                                        <div class="guide-chips" id="guideShapes"></div>
                                    </div>

                                    <div class="guide-row">
                                        <span class="guide-label">Setting:</span>
                                        <div class="guide-chips" id="guideSettings"></div>
                                    </div>

                                    <div class="guide-row">
                                        <span class="guide-label">Metal:</span>
                                        <div class="guide-chips" id="guideMetals"></div>
                                    </div>

                                    <div class="guide-row">
                                        <span class="guide-label">Accents:</span>
                                        <div class="guide-chips" id="guideAccents"></div>
                                    </div>
                                </div>

                                <button class="btn btn-primary" onclick="app.generateRing()" id="generateBtn">
                                    Create My Ring ‚ú®
                                </button>
                            </div>
                        </div>

                        <!-- Conversation History (shown after first generation) -->
                        <div class="conversation-history" id="conversationHistory" style="display: none;">
                            <!-- Messages will be inserted here -->
                        </div>

                        <!-- Refinement Input (shown after first generation) -->
                        <div class="refinement-input" id="refinementInput" style="display: none;">
                            <div class="refinement-form">
                                <input
                                    type="text"
                                    id="refinementText"
                                    placeholder="Refine your design: 'make the band thinner' or 'add sapphire side stones'..."
                                    maxlength="200"
                                >
                                <button class="btn btn-primary btn-refine" onclick="app.refineDesign()">
                                    Refine ‚ú®
                                </button>
                            </div>
                            <div class="refinement-actions">
                                <button class="btn btn-secondary" onclick="app.selectCurrentDesign()">
                                    I Love This! üíï
                                </button>
                                <button class="btn-reset" onclick="app.startOver()">
                                    Start Over
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Screen 5: Preview & Confirmation -->
    <section id="previewScreen" class="screen">
        <div class="container">
            <h2 class="screen-title">Your Perfect Ring</h2>
            <p class="screen-subtitle">Take a moment to imagine this on your hand...</p>

            <div class="preview-content">
                <div class="preview-image-container">
                    <img id="previewImage" src="" alt="Your ring design">
                </div>

                <div class="preview-details">
                    <h3>Design Details</h3>
                    <p id="previewDescription"></p>

                    <div class="preview-actions">
                        <button class="btn btn-primary" onclick="app.confirmDesign()">
                            This is Perfect! üíï
                        </button>
                        <button class="btn btn-secondary" onclick="app.goBack()">
                            Let me revise
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Screen 6: Thank You / Confirmation -->
    <section id="thankYouScreen" class="screen">
        <div class="container">
            <div class="thankyou-content">
                <div class="thankyou-icon">üíç</div>
                <h2 class="thankyou-title">Your Design Has Been Saved!</h2>
                <p class="thankyou-message">
                    Maria, your beautiful choice has been captured.
                    This ring will be crafted with all the love and care you deserve.
                    I can't wait to see it on your hand and hear you say yes.
                </p>
                <div class="thankyou-ring-preview">
                    <img id="finalRingImage" src="" alt="Your chosen ring">
                </div>
                <p class="thankyou-note">
                    All the love in the world,<br>
                    <span class="signature">Forever Yours</span>
                </p>
            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="js/fal-api.js"></script>
    <script src="js/firebase-client.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
